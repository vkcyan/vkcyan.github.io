<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Vue使用json-server来进行后端数据模拟 · vkcyan</title><meta name="description" content="Vue使用json-server来进行后端数据模拟 - vkcyan"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="vkcyan"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">简历</a></li><li class="nav-list-item"><a href="https://github.com/vkcyan" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Vue使用json-server来进行后端数据模拟</h1><div class="post-info">Apr 16, 2018</div><div class="post-content"><p>  正开发过程中 前后端分离或者不分离 ,接口多半是之后与页面的开发 ,所以建立rest的APL的接口 给前端提供虚拟的数据是非常必要的 所以这里我使用了json-server作为工具,支持CORS和JSONP跨域请求，支持GET, POST, PUT, PATCH 和 DELETE 方法,更提供了一系列的查询方法，如limit，order等,接下来我把我自己的上使用心写成文档</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>首先必须有node环境(都用到json-server一定会有node环境吧)然后全局安装json-server</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install json-server -g</span><br></pre></td></tr></table></figure>
<p>安装完成后检查是否全局安装成功</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">G:\demo\JavaScript\Vue\Vue one\project\my-project\Vue_two\my-project&gt;json-server -h</span><br><span class="line">index.js [options] &lt;<span class="built_in">source</span>&gt;</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  --config, -c               Path to config file   [default: <span class="string">"json-server.json"</span>]</span><br><span class="line">  --port, -p                 Set port                            [default: 3000]</span><br><span class="line">  --host, -H                 Set host                       [default: <span class="string">"0.0.0.0"</span>]</span><br><span class="line">  --watch, -w                Watch file(s)                             [boolean]</span><br><span class="line">  --routes, -r               Path to routes file</span><br><span class="line">  --middlewares, -m          Paths to middleware files                   [array]</span><br><span class="line">  --static, -s               Set static files directory</span><br><span class="line">  --<span class="built_in">read</span>-only, --ro          Allow only GET requests                   [boolean]</span><br><span class="line">  --no-cors, --nc            Disable Cross-Origin Resource Sharing     [boolean]</span><br><span class="line">  --no-gzip, --ng            Disable GZIP Content-Encoding             [boolean]</span><br><span class="line">  --snapshots, -S            Set snapshots directory              [default: <span class="string">"."</span>]</span><br><span class="line">  --delay, -d                Add delay to responses (ms)</span><br><span class="line">  --id, -i                   Set database id property (e.g. _id) [default: <span class="string">"id"</span>]</span><br><span class="line">  --foreignKeySuffix, --fks  Set foreign key suffix (e.g. _id as <span class="keyword">in</span> post_id)</span><br><span class="line">                                                                 [default: <span class="string">"Id"</span>]</span><br><span class="line">  --quiet, -q                Suppress <span class="built_in">log</span> messages from output         [boolean]</span><br><span class="line">  --<span class="built_in">help</span>, -h                 Show <span class="built_in">help</span>                                 [boolean]</span><br><span class="line">  --version, -v              Show version number                       [boolean]</span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line">  index.js db.json</span><br><span class="line">  index.js file.js</span><br><span class="line">  index.js http://example.com/db.json</span><br><span class="line"></span><br><span class="line">https://github.com/typicode/json-server</span><br></pre></td></tr></table></figure>
<p>在项目根目录创建一个db.json的目录,然后写入信息</p>
<p><img src="http://on7r0tqgu.bkt.clouddn.com/Fn-G8MVvF3x2r52kalKOS0FT1IUn.png" alt=""></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"api"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"text"</span>: <span class="string">"数据统计"</span>,</span><br><span class="line">      <span class="string">"link"</span>: <span class="string">"#"</span>,</span><br><span class="line">      <span class="string">"hot"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"text"</span>: <span class="string">"数据检测"</span>,</span><br><span class="line">      <span class="string">"link"</span>: <span class="string">"#"</span>,</span><br><span class="line">      <span class="string">"hot"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"text"</span>: <span class="string">"流量分析"</span>,</span><br><span class="line">      <span class="string">"link"</span>: <span class="string">"#"</span>,</span><br><span class="line">      <span class="string">"hot"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"text"</span>: <span class="string">"广告发布"</span>,</span><br><span class="line">      <span class="string">"link"</span>: <span class="string">"#"</span>,</span><br><span class="line">      <span class="string">"hot"</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在package.json里面的scripts里面加一行命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"json"</span>: <span class="string">"json-server db.json --port 3003"</span></span><br></pre></td></tr></table></figure>
<p>在项目目录执行命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run json</span><br></pre></td></tr></table></figure>
<p>在bash里面会看到这样的界面</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; vue@1.0.0 json g:\demo\JavaScript\Vue\Vue one\project\my-project\Vue_two\my-project</span><br><span class="line">&gt; json-server db.json --port 3003</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  \&#123;^_^&#125;/ hi!</span><br><span class="line"></span><br><span class="line">  Loading db.json</span><br><span class="line">  Done</span><br><span class="line"></span><br><span class="line">  Resources</span><br><span class="line">  http://localhost:3003/api</span><br><span class="line"></span><br><span class="line">  Home</span><br><span class="line">  http://localhost:3003</span><br><span class="line"></span><br><span class="line">  Type s + enter at any time to create a snapshot of the database</span><br></pre></td></tr></table></figure>
<p>恭喜启动成功!</p>
<p>这时候进入网页进行访问</p>
<p><img src="http://on7r0tqgu.bkt.clouddn.com/Fq6FKrKvUmOOyPjXCHRRBG6p-uWg.png" alt=""></p>
<p>这时候就可以进行访问了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:3003/api</span><br></pre></td></tr></table></figure>
<p>可以看到之前写的json串 </p>
<p>到此json-server启动完毕</p>
<p>调用的代码是这样的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$http.get(<span class="string">'http://localhost:3003/api'</span>)</span><br><span class="line">      .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data.body)</span><br><span class="line">      &#125;, () =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'这里是用了vue-source,后端没有接口'</span>)</span><br><span class="line">      &#125;)</span><br></pre></td></tr></table></figure>
<p>页面初始化就可以看到数据 完成</p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/04/17/css隐藏多余文字/" class="prev">上一篇</a><a href="/2018/04/10/js面试题 4-10 /" class="next">下一篇</a></div><div class="copyright"><p>© 2018 <a href="http://yoursite.com">vkcyan</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>