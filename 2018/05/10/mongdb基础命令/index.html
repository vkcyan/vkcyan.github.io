<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> mongdb命令 · vkcyan</title><meta name="description" content="mongdb命令 - vkcyan"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="vkcyan"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/www.vkcyan.top" target="_self" class="nav-list-link">简历</a></li><li class="nav-list-item"><a href="https://github.com/vkcyan" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">mongdb命令</h1><div class="post-info">May 10, 2018</div><div class="post-content"><p>cls 清屏</p>
<p>show dbs   //显示当前所有数据库</p>
<p>use 数据库名   //进入指定数据库  如果不存在就创建一个</p>
<p>db   //显示当前数据库</p>
<p>show collections  //显示数据库中的合集</p>
<p> 给school表里面出入数据 student </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; use school</span><br><span class="line">switched to db school</span><br><span class="line">&gt; db</span><br><span class="line">school</span><br><span class="line">&gt; db.student.insert(&#123;id:&quot;01&quot;, name:&quot;admin&quot;, sex:&quot;boy&quot;&#125;)</span><br><span class="line">WriteResult(&#123; &quot;nInserted&quot; : 1 &#125;)</span><br></pre></td></tr></table></figure>
<p>####插入数据</p>
<p>db.student.insert({})</p>
<p>####插入多条数据</p>
<p>db.student.insert([{},{}]) </p>
<p>####查询数据</p>
<p>db.student.find()</p>
<p>####条件查询数据</p>
<p>db.student.find({name: ‘admin’})   //查询集合student里面 名字是admin的数据</p>
<p>db.student.findOne({name: ‘admin’})</p>
<p>####更新数据</p>
<p>db.student.update({name: ‘’张三’},{age: ‘20’})    第一个参数是 查询的值 第二个参数是改变的值 </p>
<p>但是这里没有添加修饰符 <strong>将全部内容修改</strong></p>
<p>db.student.update({‘age’: ‘女’}, { $set : {id:’02’} })<br>$ .set 更新操作符</p>
<p>####增加字段</p>
<p>db.student.update({‘age’: ‘女’}, { $set : {lang:’java’} })   直接写就是添加</p>
<p>####删除字段</p>
<p>db.student.update({‘age’: ‘女’},{ $unset : {score: ‘admin’} }) </p>
<p>$.unzet 删除字段</p>
<h4 id="更新多条数据"><a href="#更新多条数据" class="headerlink" title="更新多条数据"></a>更新多条数据</h4><p>db.student.updateMany({name: ‘admin’},{ $set : {name: ‘one’} })</p>
<p>updateMany方法</p>
<p>使用update也可以,但是要加参数 </p>
<p>db.student.update( { name :  ‘one’ } , { $set : { name : ‘admin’ } } , { multi : true } )</p>
<p><strong>multi : true</strong></p>
<p>删除数据</p>
<p>db.student.remove({age:’女’})</p>
<p>删除age: ‘女’的所有数据</p>
<p>db.student.remove({name: ‘local’},true)</p>
<p>删除name为local的数据 但是只删除一条</p>
<p>向内嵌文档 数组里面加数据</p>
<p>$push 无差别添加</p>
<p>db.college.update({name:’html5’},{$push:{“classes.base”:’微信小程序’}})</p>
<p>$addToSet 存在就不添加 不存在就添加</p>
<p>db.college.update({name:’html5’},{$addToSet:{“classes.base”:”web移动端”}})</p>
<p>$pop 删除内嵌文档里面的一条数据</p>
<p>db.college.update({name:’html5’},{$pop:{“classes.base”:”web移动端”}})</p>
<p>删除数据库</p>
<p>db.college.remove({})</p>
<p>db.college.drop({})</p>
<p>插入10000条数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var arr = [];</span><br><span class="line">for(var i=0;i&lt;10000;i++)&#123;</span><br><span class="line">  arr.push(&#123;counter:i&#125;)</span><br><span class="line">&#125;</span><br><span class="line">db.college.insert(arr);</span><br></pre></td></tr></table></figure>
<p>查询counter为666的文档</p>
<p>db.college.find({counter:665})</p>
<p>查询counter小于666的文档</p>
<p>db.college.find({counter:{$lt:666}})</p>
<p>$lt 小于查询符</p>
<p>查询counter大于4900的文档</p>
<p>db.college.find({counter:{$gt:4900}})</p>
<p>查询counter在60 70之间的文档</p>
<p>db.college.find({counter:{\$gt:60,$lt: 70}})</p>
<p>查询集合的前10行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.college.find().limit(10)</span><br></pre></td></tr></table></figure>
<p>查询集合 10 - 20 条</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.college.find().skip(10).limit(10)  10开始 插 10个</span><br></pre></td></tr></table></figure>
<h4 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h4><p>var cno = db.user.findOne({cname:’html学院’}).cno; 变量储存<br>db.section.find({cno:cno})   基于变量查询</p>
<p>查询wages小于13000 大于13000的所有集合</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.section.find(&#123; $or : [ &#123; wages: &#123;$lte:&quot;13000&quot;&#125;&#125;,&#123;wages: &#123;$gte:&quot;13000&quot;&#125;&#125; ] &#125; )</span><br></pre></td></tr></table></figure>
<p>给所有wanges小于13000的增加1000</p>
<p>db.section.updateMany({wages:{\$lte: 13000}},{$inc:{wages:1000}})</p>
<p>指定文档的排序规则 例如 按wages为升序db.getCollection(‘section’).find({}).sort({wages:1})</p>
<p>1 为升序 -1 为降序</p>
<p>按wages为升序 假如 wages相同 就按name排序</p>
<p>db.getCollection(‘section’).find({}).sort({wages:-1,name:-1})</p>
<p>索引查询某一列</p>
<p>只显示wages这一列</p>
<p>db.getCollection(‘section’).find({},{wages:1})</p>
<p>显示wages,name 字段</p>
<p>db.getCollection(‘section’).find({},{wages:1,name:1})</p>
<p>只不显示wages这一列</p>
<p>db.getCollection(‘section’).find({},{wages:0})</p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/05/14/cmder的一些问题/" class="prev">上一篇</a><a href="/2018/05/06/noed异步写入文件实例/" class="next">下一篇</a></div><div class="copyright"><p>© 2018 <a href="http://yoursite.com">vkcyan</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>